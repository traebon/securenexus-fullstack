global:
  resolve_timeout: 5m
  smtp_smarthost: 'mail.securenexus.net:587'
  smtp_from: 'alerts@securenexus.net'
  smtp_auth_username: 'alerts@securenexus.net'
  smtp_auth_password: 'SecureAlertsPassword2025!'
  smtp_require_tls: true

route:
  group_by: ['alertname']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 4h
  receiver: 'web.hook'
  routes:
    - match:
        severity: critical
      receiver: 'critical'
      group_wait: 10s
      group_interval: 2m
      repeat_interval: 1h
    - match_re:
        alertname: SSL.*
      receiver: 'ssl-notifications'
      group_wait: 5s
      repeat_interval: 30m

receivers:
- name: 'web.hook'
  email_configs:
  - to: 'admin@securenexus.net'

- name: 'critical'
  email_configs:
  - to: 'admin@securenexus.net'
    headers:
      Subject: 'CRITICAL SecureNexus Alert: {{ range .Alerts }}{{ .Annotations.summary }}{{ end }}'

- name: 'ssl-notifications'
  email_configs:
  - to: 'admin@securenexus.net'
    headers:
      Subject: 'SSL Certificate Alert: {{ range .Alerts }}{{ .Labels.instance }}{{ end }}'
