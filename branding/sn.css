/**
 * Authentik Theme - SecureNexus Design System
 *
 * Custom theme for Authentik SSO using PatternFly components
 * Built on SecureNexus unified design tokens
 *
 * Version: 1.0.0
 * Compatible with: Authentik 2025.10.1+
 * Requires: securenexus-unified.css
 */

/* Import unified design system first */
@import url('/static/dist/custom/securenexus-unified.css');

/* ========================================
 * AUTHENTIK-SPECIFIC OVERRIDES
 * ======================================== */

:root {
  /* Map SecureNexus tokens to PatternFly variables */
  --pf-global--primary-color--100: var(--sn-blue);
  --pf-global--primary-color--200: var(--sn-blue-light);
  --pf-global--primary-color--300: var(--sn-blue-dark);

  --pf-global--active-color--100: var(--sn-green);
  --pf-global--active-color--200: var(--sn-green-light);

  --pf-global--link--Color: var(--sn-blue);
  --pf-global--link--Color--hover: var(--sn-blue-light);

  /* Background colors */
  --pf-global--BackgroundColor--dark-100: var(--sn-neutral-900);
  --pf-global--BackgroundColor--dark-200: var(--sn-neutral-800);
  --pf-global--BackgroundColor--100: var(--sn-neutral-800);

  /* Text colors */
  --pf-global--Color--100: var(--sn-text-primary);
  --pf-global--Color--200: var(--sn-text-secondary);

  /* Success/Error states */
  --pf-global--success-color--100: var(--sn-success);
  --pf-global--warning-color--100: var(--sn-warning);
  --pf-global--danger-color--100: var(--sn-error);
}

/* ========================================
 * BACKGROUND & LAYOUT
 * ======================================== */

/* Login page background */
.ak-login-background {
  background: var(--sn-gradient-animated) !important;
  background-size: 400% 400% !important;
  animation: sn-gradient-shift 15s ease infinite !important;
  position: relative;
}

.ak-login-background::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('/static/dist/custom/login-background.png') center/cover no-repeat;
  opacity: 0.1;
  z-index: 0;
}

/* Main dashboard background */
.pf-c-page__main,
.pf-c-page {
  background: var(--sn-bg-primary) !important;
  position: relative;
}

.pf-c-page__main::before,
.pf-c-page::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--sn-gradient-animated);
  background-size: 400% 400%;
  animation: sn-gradient-shift 20s ease infinite;
  opacity: 0.05;
  z-index: -1;
}

/* ========================================
 * LOGO MANAGEMENT
 * ======================================== */

/* Replace ALL Authentik logos with SecureNexus logo */
.pf-c-brand,
.pf-c-brand img,
.ak-brand,
.ak-brand img,
.pf-c-login__main .pf-c-brand,
.pf-c-login__main .pf-c-brand img,
.pf-c-page__header-brand,
.pf-c-page__header-brand img,
.pf-c-page__header-brand .pf-c-brand,
.pf-c-page__header-brand .pf-c-brand img,
img[alt="authentik logo"],
img[alt="authentik icon"] {
  content: url('https://brand.securenexus.net/logo.png') !important;
  background: url('https://brand.securenexus.net/logo.png') center/contain no-repeat !important;
  width: auto !important;
  height: auto !important;
  display: block !important;
  filter: drop-shadow(0 4px 8px rgba(59, 130, 246, 0.3));
  transition: all var(--sn-transition-base);
}

/* Hide SVG logos */
.pf-c-brand svg,
.ak-brand svg,
.pf-c-page__header-brand svg {
  display: none !important;
}

/* Fallback logo background for elements without img tags */
.pf-c-brand:not(:has(img)),
.ak-brand:not(:has(img)),
.pf-c-page__header-brand:not(:has(img)) {
  background: url('https://brand.securenexus.net/logo.png') center/contain no-repeat !important;
  min-width: 200px !important;
  min-height: 100px !important;
}

/* Logo sizing - login page */
.pf-c-login__main .pf-c-brand,
.ak-brand img {
  max-width: 300px;
  height: auto;
  object-fit: contain;
}

/* Logo sizing - sidebar */
.pf-c-page__header-brand .pf-c-brand,
.pf-c-page__header-brand img {
  max-width: 140px;
  max-height: 40px;
  object-fit: contain;
}

/* Logo hover effects */
.pf-c-brand:hover,
.ak-brand:hover,
.pf-c-page__header-brand:hover {
  transform: scale(1.05);
  filter: drop-shadow(0 8px 16px rgba(59, 130, 246, 0.4));
}

/* ========================================
 * BRAND TAGLINE
 * ======================================== */

.ak-brand::after {
  content: "SecureNexus â€” Secure Infrastructure Platform";
  display: block;
  text-align: center;
  color: var(--sn-text-primary);
  font-size: var(--sn-text-xl);
  font-weight: var(--sn-font-semibold);
  margin-top: var(--sn-space-4);
  background: var(--sn-gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: none;
}

/* ========================================
 * CARDS & COMPONENTS
 * ======================================== */

/* Enhanced cards with glassmorphism */
.pf-c-card,
.pf-c-modal-box,
.pf-c-drawer__panel,
.pf-c-data-list__item,
.ak-application-list > .pf-c-data-list__item,
.ak-dash-card,
.pf-c-alert,
.pf-c-notification-drawer__list-item,
.pf-c-login__main {
  background: var(--sn-bg-glass) !important;
  border: 1px solid rgba(59, 130, 246, 0.2) !important;
  border-radius: var(--sn-radius-2xl) !important;
  backdrop-filter: blur(12px) saturate(180%);
  transition: all var(--sn-transition-slow);
  position: relative;
  overflow: hidden;
}

/* Gradient border effect */
.pf-c-card::before,
.pf-c-modal-box::before,
.pf-c-drawer__panel::before,
.pf-c-data-list__item::before,
.ak-application-list > .pf-c-data-list__item::before,
.ak-dash-card::before,
.pf-c-alert::before,
.pf-c-notification-drawer__list-item::before,
.pf-c-login__main::before {
  content: "";
  position: absolute;
  inset: -2px;
  z-index: -1;
  border-radius: var(--sn-radius-2xl);
  padding: 2px;
  background: var(--sn-gradient-primary);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity var(--sn-transition-base);
}

/* Hover effects */
.pf-c-card:hover,
.pf-c-data-list__item:hover,
.ak-application-list > .pf-c-data-list__item:hover {
  transform: translateY(-4px) scale(1.02);
  border-color: var(--sn-blue) !important;
  box-shadow: var(--sn-shadow-blue);
}

.pf-c-card:hover::before,
.pf-c-data-list__item:hover::before,
.ak-application-list > .pf-c-data-list__item:hover::before {
  opacity: 1;
}

/* ========================================
 * FORM ELEMENTS
 * ======================================== */

.pf-c-form__group,
.pf-c-form-control,
.pf-c-input-group,
.pf-c-select,
.pf-c-text-input-group,
input[type="text"],
input[type="password"],
input[type="email"],
textarea,
select,
.ak-form-element-horizontal {
  background: var(--sn-bg-glass) !important;
  border: 1px solid var(--sn-border) !important;
  border-radius: var(--sn-radius-lg) !important;
  backdrop-filter: blur(10px);
  transition: all var(--sn-transition-base);
  position: relative;
}

.pf-c-form__group::before,
.pf-c-form-control::before,
.pf-c-input-group::before,
.pf-c-select::before,
.pf-c-text-input-group::before,
input[type="text"]::before,
input[type="password"]::before,
input[type="email"]::before,
textarea::before,
select::before,
.ak-form-element-horizontal::before {
  content: "";
  position: absolute;
  inset: -1px;
  z-index: -1;
  border-radius: var(--sn-radius-lg);
  padding: 1px;
  background: var(--sn-gradient-primary);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity var(--sn-transition-base);
}

input[type="text"]:focus::before,
input[type="password"]:focus::before,
input[type="email"]:focus::before,
textarea:focus::before,
select:focus::before,
.pf-c-form-control:focus::before {
  opacity: 1;
}

/* ========================================
 * BUTTONS
 * ======================================== */

.pf-c-button {
  border-radius: var(--sn-radius-lg) !important;
  font-weight: var(--sn-font-medium);
  transition: all var(--sn-transition-base);
  position: relative;
  overflow: hidden;
}

.pf-c-button.pf-m-primary {
  background: var(--sn-gradient-primary) !important;
  border: none !important;
  color: var(--sn-white) !important;
}

.pf-c-button.pf-m-primary:hover {
  background: var(--sn-gradient-primary-hover) !important;
  transform: translateY(-2px);
  box-shadow: var(--sn-shadow-blue);
}

.pf-c-button.pf-m-secondary {
  background: transparent !important;
  border: 1px solid var(--sn-blue) !important;
  color: var(--sn-blue) !important;
}

.pf-c-button.pf-m-secondary:hover {
  background: var(--sn-blue) !important;
  color: var(--sn-white) !important;
  box-shadow: var(--sn-shadow-blue);
}

/* Button shimmer effect */
.pf-c-button.pf-m-primary::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  animation: sn-shimmer 3s infinite;
  z-index: 1;
}

/* ========================================
 * NAVIGATION
 * ======================================== */

.pf-c-nav__item {
  border-radius: var(--sn-radius-lg) !important;
  margin: var(--sn-space-1) 0;
  transition: all var(--sn-transition-base);
}

.pf-c-nav__item::before {
  content: "";
  position: absolute;
  inset: -1px;
  z-index: -1;
  border-radius: var(--sn-radius-lg);
  padding: 1px;
  background: var(--sn-gradient-primary);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity var(--sn-transition-base);
}

.pf-c-nav__item:hover::before,
.pf-c-nav__item.pf-m-current::before {
  opacity: 1;
}

.pf-c-page__sidebar {
  background: var(--sn-bg-secondary) !important;
  border-right: 1px solid rgba(59, 130, 246, 0.1);
}

.pf-c-page__header {
  background: var(--sn-bg-surface) !important;
  border-bottom: 1px solid rgba(59, 130, 246, 0.1);
  backdrop-filter: blur(10px);
}

/* ========================================
 * STATUS INDICATORS
 * ======================================== */

.pf-c-label.pf-m-green,
.ak-status-label.pf-m-success {
  background: rgba(34, 197, 94, 0.1) !important;
  color: var(--sn-success) !important;
  border: 1px solid rgba(34, 197, 94, 0.2) !important;
}

.pf-c-label.pf-m-red,
.ak-status-label.pf-m-error {
  background: rgba(239, 68, 68, 0.1) !important;
  color: var(--sn-error) !important;
  border: 1px solid rgba(239, 68, 68, 0.2) !important;
}

.pf-c-label.pf-m-orange,
.ak-status-label.pf-m-warning {
  background: rgba(245, 158, 11, 0.1) !important;
  color: var(--sn-warning) !important;
  border: 1px solid rgba(245, 158, 11, 0.2) !important;
}

/* ========================================
 * TABLES
 * ======================================== */

.pf-c-table {
  background: var(--sn-bg-surface) !important;
  border-radius: var(--sn-radius-xl);
  overflow: hidden;
}

.pf-c-table thead th {
  background: var(--sn-gradient-primary) !important;
  color: var(--sn-white) !important;
  border: none !important;
}

.pf-c-table tbody tr {
  border-bottom: 1px solid rgba(59, 130, 246, 0.1) !important;
  transition: all var(--sn-transition-base);
}

.pf-c-table tbody tr:hover {
  background: var(--sn-bg-glass) !important;
  transform: scale(1.01);
}

/* ========================================
 * RESPONSIVE ADJUSTMENTS
 * ======================================== */

@media (max-width: 768px) {
  .ak-brand::after {
    font-size: var(--sn-text-lg);
    margin-top: var(--sn-space-3);
  }

  .pf-c-login__main .pf-c-brand,
  .ak-brand img {
    max-width: 250px;
  }

  .pf-c-page__header-brand .pf-c-brand,
  .pf-c-page__header-brand img {
    max-width: 120px;
    max-height: 35px;
  }
}

/* ========================================
 * ACCESSIBILITY ENHANCEMENTS
 * ======================================== */

@media (prefers-reduced-motion: reduce) {
  .ak-login-background,
  .pf-c-page__main::before,
  .pf-c-page::before {
    animation: none !important;
  }

  .pf-c-button.pf-m-primary::before {
    animation: none !important;
  }
}

@media (prefers-reduced-transparency: reduce) {
  .pf-c-card,
  .pf-c-modal-box,
  .pf-c-data-list__item,
  .pf-c-form-control,
  input[type="text"],
  input[type="password"],
  input[type="email"],
  textarea {
    background: var(--sn-bg-surface) !important;
    backdrop-filter: none;
  }
}

/* ========================================
 * DARK MODE OPTIMIZATIONS
 * ======================================== */

@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
  }

  .pf-c-page,
  .pf-c-page__main {
    background: var(--sn-neutral-900) !important;
  }
}

/* ========================================
 * CUSTOM SCROLLBAR
 * ======================================== */

.pf-c-page__main ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.pf-c-page__main ::-webkit-scrollbar-track {
  background: var(--sn-bg-primary);
  border-radius: var(--sn-radius-base);
}

.pf-c-page__main ::-webkit-scrollbar-thumb {
  background: var(--sn-gradient-primary);
  border-radius: var(--sn-radius-base);
  transition: all var(--sn-transition-base);
}

.pf-c-page__main ::-webkit-scrollbar-thumb:hover {
  background: var(--sn-gradient-primary-hover);
}

/* ========================================
 * LOADING & SKELETON STATES
 * ======================================== */

.ak-skeleton,
.pf-c-skeleton {
  background: var(--sn-gradient-primary) !important;
  background-size: 400% 400% !important;
  animation: sn-gradient-shift 2s ease infinite !important;
  border-radius: var(--sn-radius-lg) !important;
}

/* ========================================
 * FOOTER
 * ======================================== */

.pf-c-page__main-section:last-child::after {
  content: "Powered by SecureNexus Infrastructure Platform";
  display: block;
  text-align: center;
  margin-top: var(--sn-space-8);
  padding: var(--sn-space-4);
  background: var(--sn-gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: var(--sn-text-sm);
  font-weight: var(--sn-font-medium);
}